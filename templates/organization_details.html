{% extends 'base.html' %}

{% block title %}View Organization{% endblock %}

{% block head %}
<style></style>
{% endblock %}

{% block body %} 


<h1>Organizations Nearby</h1>


<p>{{ organization['name'] }}</p>
{% if organization.get('photos') %}
<img src="{{ organization['photos'][0]['medium'] }}">
{% else %}
<img src="/static/img/organization.jpg">
{% endif %}
{% if organization.get('website') %}
<p>Go to {{ organization['name'] }}'s <a href="{{ organization['website'] }}">website</a>.</p>
{% endif %}
<p id="city">{{ organization['address']['city'] }}, {{ organization['address']['state'] }}, {{ organization['address']['postcode'] }}</p>

<!-- Google Geocoding API Key -->
<script> let googleGeoKey = "{{ google_geo_key }}"</script>
<p id="zipcode" data-zipcode="{{ organization['address']['postcode'] }}"></p>

{% if organization.get('email') %}
<p><a href="mailto:{{ organization['email'] }}?subject=Inquiry from HappyPaws user&body=Hi, I am interested in your adopting policy. Could you please send me the application form and details on the application process? ">{{ organization['email'] }}</a></p><br>
{% endif %}
{% if organization.get('phone') %}
<p><a href="tel:{{ organization['phone'] }}">Phone: {{ organization['phone'] }}</a></p><br>
{% endif %}

<p id="org-id" data-org-id="{{ organization['id'] }}"></p>


<!-- Inserting Google Map to show the location of the shelter where chosen animal is -->
<div id="map" style="height: 350px; width: 350px;"></div>
<script src="/static/js/map.js"></script>


<div id="available-animals-at-organization">
  <h3>Animals available for adoption at {{ organization['name'] }}</h3>
  <div class="row row-cols-lg-4 row-cols-md-3 row-cols-sm-2 row-cols-xs-1 g-5">
    {% for animal in animals %}
    <div class="col">
      <a href="/{{ animal['type']|lower }}/{{ animal['organization_id'] }}/{{ animal['id']}}">
      <div class="card h-90">
        {% if animal['photos']|length > 0 %}
        <img src="{{ animal['photos'][0]['full'] }}" class="card-img-top" alt="animal">
        {% else %}
          {% if animal['type'] == 'Dog' %}
          <img src="https://media.istockphoto.com/id/942318196/vector/dog-puppy-smiling-funny-animals-coloring-pages-cartoon-vector-illustration.jpg?s=612x612&w=0&k=20&c=VmV1zfZ56Kulm6nbf3wzeZfef3DwIHpT22lt4dK52nA="><br>
          {% elif animal['type'] == 'Cat' %}
          <img src="https://i.etsystatic.com/7867651/r/il/929251/1234114682/il_1588xN.1234114682_1t12.jpg"><br>
          {% elif animal['type'] == 'Rabbit' %}
          <img src="https://i.etsystatic.com/21185388/r/il/dc90fa/2226677215/il_1588xN.2226677215_6bov.jpg"><br>
          {% elif animal['type'] == 'Bird' %}
          <img src="https://i.etsystatic.com/33889596/r/il/1e530a/3744462889/il_1588xN.3744462889_4k4v.jpg"><br>
          {% endif %}
        {% endif %}</a>
        <div class="card-body">
          <h5 class="card-title">{{ animal['name']|safe|title }}</h5>
          <p class="card-text">{{ animal['breeds']['primary'] }}</p>
        </div>
      </div>
  </div>
    {% endfor %}
</div>


<!-- Google Maps -->
<script async src="https://maps.googleapis.com/maps/api/js?key={{ google_maps_api_key }}&callback=initOrgMap"></script>
<script></script>

{% endblock %}